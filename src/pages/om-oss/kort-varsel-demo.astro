---
/**
 * Demosida: Kort varsel SMS-systemet
 * 
 * Interaktiv demonstration f√∂r personal och patienter
 * som visar hur systemet fungerar.
 * 
 * Skapad av: Gemini AI + Claude AI
 * Datum: 2026-01-24
 */

import BaseLayout from "../../layouts/BaseLayout.astro";

const title = "Kort varsel-SMS - S√• fungerar det";
const description = "Se hur v√•rt smarta SMS-system hj√§lper dig att f√• en tidigare operationstid n√§r n√•gon avbokar. Interaktiv demonstration.";
---

<BaseLayout title={title} description={description}>
  
  <!-- Custom styles for this page -->
  <style>
    .chart-container {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      height: 300px;
      max-height: 350px;
    }

    .phone-mockup {
      border: 12px solid #1f2937;
      border-radius: 2rem;
      overflow: hidden;
      background: white;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .demo-section {
      scroll-margin-top: 100px;
    }
  </style>

  <main class="bg-stone-50">
    
    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-rose-600 to-rose-700 text-white py-16">
      <div class="max-w-5xl mx-auto px-4 text-center">
        <div class="inline-flex items-center gap-2 bg-white/20 rounded-full px-4 py-2 text-sm mb-6">
          <span class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></span>
          Systemet √§r aktivt
        </div>
        <div class="flex items-center justify-center gap-3 mb-4">
          <!-- SMS Bubble SVG Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 md:w-14 md:h-14">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z" />
          </svg>
          <h1 class="text-4xl md:text-5xl font-bold">
            Kort varsel-SMS
          </h1>
        </div>
        <p class="text-xl text-rose-100 max-w-2xl mx-auto">
          S√• hj√§lper vi dig att f√• en tidigare operationstid n√§r n√•gon avbokar i sista minuten
        </p>
      </div>
    </section>

    <div class="max-w-6xl mx-auto px-4 py-12 space-y-16">

      <!-- Intro Section -->
      <section class="demo-section bg-white rounded-2xl shadow-sm p-8 border border-stone-200">
        <div class="max-w-3xl">
          <h2 class="text-3xl font-bold text-slate-900 mb-4">Vad √§r Kort varsel-SMS?</h2>
          <p class="text-lg text-slate-600 leading-relaxed mb-6">
            N√§r en patient avbokar sin operation med kort varsel f√•r vi en ledig tid som vi vill fylla. 
            Ist√§llet f√∂r att ringa runt manuellt skickar vi <strong>automatiska SMS</strong> till patienter 
            p√• v√§ntelistan som kan t√§nka sig att komma med kort varsel.
          </p>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-stone-50 p-4 rounded-xl border border-stone-200 hover:shadow-md transition group">
              <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center mb-2 group-hover:bg-emerald-200 transition">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-emerald-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <h3 class="font-bold text-slate-800 group-hover:text-emerald-700 transition">Snabbare v√•rd</h3>
              <p class="text-sm text-slate-500">Du kan f√• din operation tidigare.</p>
            </div>
            <div class="bg-stone-50 p-4 rounded-xl border border-stone-200 hover:shadow-md transition group">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mb-2 group-hover:bg-blue-200 transition">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605" />
                </svg>
              </div>
              <h3 class="font-bold text-slate-800 group-hover:text-blue-700 transition">R√§ttvist system</h3>
              <p class="text-sm text-slate-500">De som har mest ont prioriteras.</p>
            </div>
            <div class="bg-stone-50 p-4 rounded-xl border border-stone-200 hover:shadow-md transition group">
              <div class="w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center mb-2 group-hover:bg-rose-200 transition">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-rose-600">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
                </svg>
              </div>
              <h3 class="font-bold text-slate-800 group-hover:text-rose-700 transition">S√§kert & frivilligt</h3>
              <p class="text-sm text-slate-500">Du v√§ljer sj√§lv om du vill delta.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Requirements Section -->
      <section class="demo-section bg-amber-50 rounded-2xl shadow-sm p-8 border-2 border-amber-200">
        <h2 class="text-2xl font-bold text-amber-900 mb-4 flex items-center gap-2">
          <span>üìã</span> Krav f√∂r att delta
        </h2>
        <p class="text-amber-800 mb-6">
          F√∂r att kunna erbjudas en kortvarselstid beh√∂ver f√∂ljande vara uppfyllt:
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="bg-white p-4 rounded-xl border border-amber-200">
            <h3 class="font-bold text-amber-900 mb-2">‚úÖ Ifylld h√§lsodeklaration</h3>
            <p class="text-sm text-amber-700">
              Du m√•ste ha fyllt i din h√§lsodeklaration s√• vi vet att du √§r redo f√∂r operation. 
              Utan den kan vi inte bed√∂ma om det √§r s√§kert att operera dig med kort varsel.
            </p>
          </div>
          <div class="bg-white p-4 rounded-xl border border-amber-200">
            <h3 class="font-bold text-amber-900 mb-2">‚úÖ Samtycke till SMS</h3>
            <p class="text-sm text-amber-700">
              I h√§lsodeklarationen kan du ange om du vill f√• personliga SMS med information om din operation, 
              eller om du f√∂redrar generella meddelanden. B√•da alternativen fungerar.
            </p>
          </div>
        </div>
        
        <div class="mt-4 p-4 bg-white rounded-lg text-sm text-amber-800 border border-amber-300">
          <p class="font-bold mb-2">‚ö†Ô∏è Viktigt: Detta √§r ett NYTT fr√•geformul√§r!</p>
          <p class="mb-2">
            Du fick en l√§nk till h√§lsodeklarationen via SMS samma dag som du bokades f√∂r operation 
            (oftast efter ditt mottagningsbes√∂k eller telefonkontakt).
          </p>
          <p class="text-amber-700 mb-3">
            <strong>Obs!</strong> F√∂rv√§xla inte denna med de kortare fr√•geformul√§r du fyllt i tidigare. 
            H√§lsodeklarationen √§r mer omfattande och <u>m√•ste</u> fyllas i separat innan operation.
          </p>
          <a href="https://www.specialist.se/hd" target="_blank" rel="noopener" 
             class="inline-flex items-center gap-2 bg-amber-600 hover:bg-amber-700 text-white font-medium px-4 py-2 rounded-lg transition">
            üìã Har du inte fyllt i h√§lsodeklarationen? G√∂r det h√§r ‚Üí
          </a>
        </div>
      </section>

      <!-- How it works for patients -->
      <section class="demo-section">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-slate-900">S√• fungerar det f√∂r dig som patient</h2>
          <p class="text-slate-600 mt-2">Tre enkla steg fr√•n SMS till bokad tid.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <div>
            <div class="space-y-4">
              <!-- Step 1: SMS -->
              <div class="flex gap-4 p-4 rounded-lg bg-white border border-stone-200 cursor-pointer hover:border-rose-400 transition group step-btn" data-step="1">
                <div class="flex-shrink-0 w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                  </svg>
                </div>
                <div>
                  <h4 class="font-bold text-slate-800 group-hover:text-blue-700 transition">1. Du f√•r ett SMS</h4>
                  <p class="text-sm text-slate-500">Med information om den lediga tiden och en l√§nk.</p>
                </div>
              </div>
              <!-- Step 2: Health Check -->
              <div class="flex gap-4 p-4 rounded-lg bg-white border border-stone-200 cursor-pointer hover:border-rose-400 transition group step-btn" data-step="2">
                <div class="flex-shrink-0 w-12 h-12 bg-rose-50 rounded-full flex items-center justify-center text-rose-600 group-hover:bg-rose-100 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                  </svg>
                </div>
                <div>
                  <h4 class="font-bold text-slate-800 group-hover:text-rose-700 transition">2. Bekr√§fta din h√§lsostatus</h4>
                  <p class="text-sm text-slate-500">Svara p√• en kort fr√•ga om infektioner.</p>
                </div>
              </div>
              <!-- Step 3: Confirmation -->
              <div class="flex gap-4 p-4 rounded-lg bg-white border border-stone-200 cursor-pointer hover:border-rose-400 transition group step-btn" data-step="3">
                <div class="flex-shrink-0 w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-600 group-hover:bg-emerald-100 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <h4 class="font-bold text-slate-800 group-hover:text-emerald-700 transition">3. F√• din bekr√§ftelse</h4>
                  <p class="text-sm text-slate-500">Vi ringer dig f√∂r att slutf√∂ra bokningen.</p>
                </div>
              </div>
            </div>

            <div class="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
              <p class="text-sm text-amber-800">
                <strong>üí° Tips:</strong> Klicka p√• stegen ovan f√∂r att se hur det ser ut p√• mobilen!
              </p>
            </div>
          </div>

          <!-- Interactive Phone Mockup -->
          <div class="flex justify-center">
            <div class="phone-mockup w-[320px] h-[640px] relative bg-stone-50 flex flex-col">
              <!-- Status Bar -->
              <div class="bg-slate-900 text-white text-[10px] px-4 py-1 flex justify-between items-center">
                <span>14:30</span>
                <div class="flex gap-1">
                  <span>üì∂</span>
                  <span>üîã</span>
                </div>
              </div>
              
              <!-- Screen Content -->
              <div id="phoneContent" class="flex-1 overflow-y-auto p-4 relative">
                <!-- Content injected via JS -->
              </div>

              <!-- Home Bar -->
              <div class="h-1 w-1/3 bg-slate-300 rounded-full mx-auto mb-2"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Priority Algorithm (Simplified for patients) -->
      <section class="demo-section bg-white rounded-2xl shadow-sm p-8 border border-stone-200">
        <h2 class="text-2xl font-bold text-slate-900 mb-4">Vem f√•r SMS f√∂rst?</h2>
        <p class="text-slate-600 mb-6">
          Vi prioriterar patienter baserat p√• medicinsk angel√§genhet. De som har st√∂rst behov f√•r fr√•gan f√∂rst.
        </p>
        
        <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
          <div class="bg-red-50 border-2 border-red-200 p-4 rounded-xl text-center hover:shadow-md transition">
            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2">
              <span class="text-2xl">üö®</span>
            </div>
            <h4 class="font-bold text-red-800">Akut</h4>
            <p class="text-xs text-red-600">M√•ste opereras snarast</p>
          </div>
          <div class="bg-orange-50 border-2 border-orange-200 p-4 rounded-xl text-center hover:shadow-md transition">
            <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2">
              <span class="text-2xl">üìã</span>
            </div>
            <h4 class="font-bold text-orange-800">Sjukskrivna</h4>
            <p class="text-xs text-orange-600">Ont + kan ej arbeta</p>
          </div>
          <div class="bg-amber-50 border-2 border-amber-200 p-4 rounded-xl text-center hover:shadow-md transition">
            <div class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-2">
              <span class="text-2xl">üî•</span>
            </div>
            <h4 class="font-bold text-amber-800">Mycket ont</h4>
            <p class="text-xs text-amber-600">H√∂g sm√§rtniv√•</p>
          </div>
          <div class="bg-emerald-50 border-2 border-emerald-200 p-4 rounded-xl text-center hover:shadow-md transition">
            <div class="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-2">
              <span class="text-2xl">üë¥</span>
            </div>
            <h4 class="font-bold text-emerald-800">Pension√§rer</h4>
            <p class="text-xs text-emerald-600">67+ flexibla tider</p>
          </div>
          <div class="bg-blue-50 border-2 border-blue-200 p-4 rounded-xl text-center hover:shadow-md transition">
            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2">
              <span class="text-2xl">‚è∞</span>
            </div>
            <h4 class="font-bold text-blue-800">√ñvriga</h4>
            <p class="text-xs text-blue-600">Normal v√§ntelista</p>
          </div>
        </div>

        <!-- Additional factors -->
        <div class="mt-6 p-4 bg-stone-50 border border-stone-200 rounded-xl">
          <h4 class="font-bold text-slate-800 mb-3">Ytterligare faktorer som p√•verkar:</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div class="flex gap-3 items-start">
              <span class="text-lg">‚ÜîÔ∏è</span>
              <div>
                <span class="font-medium text-slate-700">H√∂ger/V√§nster sida (H√ñ/V√Ñ)</span>
                <p class="text-slate-500 text-xs mt-0.5">
                  Patienter med r√§tt sida prioriteras inom varje niv√•. Det minskar utrustningsbyten under operationsdagen.
                </p>
              </div>
            </div>
            <div class="flex gap-3 items-start">
              <span class="text-lg">üìè</span>
              <div>
                <span class="font-medium text-slate-700">Operationsstorlek (Liten/Stor)</span>
                <p class="text-slate-500 text-xs mt-0.5">
                  Liten (5-15 min) eller stor (15-60 min) operation matchas mot den lediga tiden.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- FAQ for patients -->
      <section class="demo-section">
        <h2 class="text-2xl font-bold text-slate-900 mb-6">Vanliga fr√•gor</h2>
        
        <!-- Important clarification box -->
        <div class="bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6">
          <p class="text-blue-800 font-medium mb-3">
            ‚ÑπÔ∏è <strong>Viktigt att veta:</strong> Kort varsel SMS √§r <u>endast</u> en extra m√∂jlighet att f√• en tidigare tid. 
            Oavsett om du tackar nej eller avregistrerar dig ‚Äì <strong class="underline">din ordinarie planerade operationstid p√•verkas aldrig</strong>.
          </p>
          <p class="text-blue-700 text-sm">
            ‚ö†Ô∏è <strong>Beh√∂ver du avboka eller omboka din operation?</strong> Det g√∂r du <u>inte</u> via detta system. 
            Kontakta oss via <strong>telefon 08-551 104 22</strong> eller <strong>Mina v√•rdkontakter (1177)</strong>.
          </p>
        </div>
        
        <div class="space-y-4">
          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>Varf√∂r m√•ste jag fylla i h√§lsodeklarationen?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              <p class="mb-2">
                H√§lsodeklarationen √§r ett krav f√∂r att vi ska kunna erbjuda dig en kortvarselstid. Den inneh√•ller viktig information om:
              </p>
              <ul class="list-disc list-inside mb-3 space-y-1">
                <li>Din h√§lsostatus och eventuella sjukdomar</li>
                <li>Mediciner du tar (s√§rskilt blodf√∂rtunnande)</li>
                <li>Om du samtycker till personliga SMS eller f√∂redrar generella meddelanden</li>
              </ul>
              <div class="bg-amber-50 border border-amber-200 rounded p-2 text-amber-800 text-xs mb-2">
                <strong>‚ö†Ô∏è Viktigt:</strong> H√§lsodeklarationen √§r ett <u>nytt</u> fr√•geformul√§r ‚Äì inte samma som de kortare formul√§r 
                du kan ha fyllt i tidigare. Du fick l√§nken via SMS samma dag du bokades f√∂r operation.
              </div>
              <a href="https://www.specialist.se/hd" target="_blank" rel="noopener" 
                 class="inline-block text-xs bg-amber-600 hover:bg-amber-700 text-white px-3 py-1.5 rounded transition">
                ‚Üí Fyll i h√§lsodeklarationen
              </a>
            </div>
          </details>

          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>M√•ste jag svara direkt?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              <p class="mb-2">
                Nej, men det √§r "f√∂rst till kvarn" som g√§ller. Om du √§r intresserad, svara s√• snart du kan!
              </p>
              <p>
                Om du inte kan just den tiden √§r det bara att svara NEJ ‚Äì <strong class="underline">din ordinarie operationstid p√•verkas inte</strong>.
              </p>
            </div>
          </details>

          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>Vad h√§nder om jag svarar JA men √•ngrar mig?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              <p class="mb-2">
                Ring oss p√• <strong>08-551 104 22</strong> s√• fort som m√∂jligt. Vi f√∂rst√•r att planer kan √§ndras.
              </p>
              <p>
                <strong class="underline">Din ordinarie operationstid finns kvar</strong> om den nya tiden inte fungerar.
              </p>
            </div>
          </details>

          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>Kan jag sluta f√• SMS om kort varseltid?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              <p class="mb-3">
                Ja! Du kan antingen klicka p√• "Jag vill inte l√§ngre f√• dessa f√∂rfr√•gningar" p√• svarssidan, 
                eller svara <strong>STOPP</strong> p√• ett SMS.
              </p>
              <p class="bg-emerald-50 border border-emerald-200 rounded-lg p-3 text-emerald-800">
                <strong class="underline">Viktigt:</strong> Din ordinarie operationstid p√•verkas inte! 
                Detta avregistrerar dig endast fr√•n kortvarselfunktionen ‚Äì din planerade operation kvarst√•r som vanligt.
              </p>
            </div>
          </details>

          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>Kan jag avboka eller omboka min operation h√§r?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              <p class="mb-3">
                <strong>Nej.</strong> Detta system √§r <u>endast</u> till f√∂r patienter som vill ha m√∂jlighet att komma <em>tidigare</em> ‚Äì 
                inte f√∂r att avboka eller omboka din planerade operation.
              </p>
              <p class="bg-amber-50 border border-amber-200 rounded-lg p-3 text-amber-800">
                <strong>Beh√∂ver du avboka eller omboka?</strong><br>
                Kontakta oss via:<br>
                ‚Ä¢ <strong>Telefon:</strong> 08-551 104 22<br>
                ‚Ä¢ <strong>Mina v√•rdkontakter:</strong> via 1177.se
              </p>
            </div>
          </details>

          <details class="bg-white rounded-lg shadow-sm border border-stone-200 group">
            <summary class="px-4 py-3 cursor-pointer font-medium text-slate-800 hover:text-rose-600 flex justify-between items-center">
              <span>√Ñr mina uppgifter s√§kra?</span>
              <span class="text-slate-400 group-open:rotate-180 transition">‚ñº</span>
            </summary>
            <div class="px-4 pb-4 text-sm text-slate-600 border-t border-stone-100 pt-2">
              Ja. Ditt telefonnummer krypteras och raderas automatiskt efter din operation. 
              Vi f√∂ljer GDPR och Patientdatalagen. Endast beh√∂rig personal har tillg√•ng.
            </div>
          </details>
        </div>
      </section>

      <!-- For staff (collapsible) -->
      <section class="demo-section">
        <details class="bg-slate-800 text-white rounded-2xl overflow-hidden">
          <summary class="px-6 py-4 cursor-pointer font-bold text-lg flex justify-between items-center">
            <span>üîß F√∂r personal: Teknisk information</span>
            <span class="text-slate-400">‚ñº</span>
          </summary>
          <div class="px-6 pb-6 space-y-8">

            <!-- Priority Algorithm Simulation -->
            <div>
              <h3 class="font-bold text-lg mb-2 text-slate-200 flex items-center gap-2">
                <span class="text-xl">‚ö°</span> Prioritetsalgoritm (Gradvis utskick)
              </h3>
              <p class="text-slate-400 text-sm mb-4">
                Systemet skickar inte SMS till alla samtidigt. Ist√§llet anv√§nds "gradvis utskick" baserat p√• klinisk urgens.
              </p>

              <div class="bg-slate-900 rounded-xl overflow-hidden">
                <div class="grid grid-cols-1 lg:grid-cols-3">
                  <!-- Control Panel -->
                  <div class="p-6 bg-slate-800 border-r border-slate-700 flex flex-col justify-between">
                    <div>
                      <h4 class="font-bold text-sm mb-3 text-slate-300">Kontrollpanel</h4>
                      <p class="text-xs text-slate-500 mb-4">Klicka p√• start f√∂r att simulera en kampanj.</p>
                      
                      <div class="space-y-3">
                        <button id="startSimBtn" class="w-full bg-rose-600 hover:bg-rose-700 text-white font-bold py-2.5 px-4 rounded-lg shadow-sm transition transform active:scale-95 flex items-center justify-center gap-2 text-sm">
                          <span>‚ñ∂</span> Starta Kampanj
                        </button>
                        <button id="resetSimBtn" class="w-full bg-slate-700 border border-slate-600 hover:bg-slate-600 text-slate-300 font-medium py-2.5 px-4 rounded-lg transition disabled:opacity-50 text-sm" disabled>
                          <span>‚Ü∫</span> √Öterst√§ll
                        </button>
                      </div>
                    </div>
                    <div class="mt-6">
                      <div class="text-xs font-mono text-slate-500 uppercase tracking-widest mb-2">Status</div>
                      <div id="simStatus" class="font-mono text-emerald-400 font-bold bg-slate-900 p-2.5 rounded border border-slate-700 text-sm">
                        V√§ntar p√• start...
                      </div>
                    </div>
                  </div>

                  <!-- Visualization -->
                  <div class="col-span-2 p-6 relative">
                    <!-- Timer -->
                    <div class="absolute top-6 right-6 text-right">
                      <div class="text-xs text-slate-500 font-mono">TID (SIMULERAD)</div>
                      <div id="simTimer" class="text-2xl font-bold text-white tabular-nums">0 min</div>
                    </div>

                    <div class="space-y-3 mt-8">
                      <!-- Group 1: Akut -->
                      <div id="group1" class="p-3 rounded-xl border-2 border-transparent bg-slate-800 transition-all duration-300 opacity-50">
                        <div class="flex justify-between items-center">
                          <div class="flex items-center gap-3">
                            <div class="text-xl bg-slate-700 p-2 rounded-full">üö®</div>
                            <div>
                              <h4 class="font-bold text-white text-sm">1. Akut & Standby</h4>
                              <p class="text-xs text-slate-500">H√∂gsta prioritet</p>
                            </div>
                          </div>
                          <div class="text-right">
                            <span class="block text-xs font-bold text-rose-400 uppercase tracking-wider">Exklusivitet</span>
                            <span class="text-sm font-mono font-bold text-slate-300">60 min</span>
                          </div>
                        </div>
                        <div class="mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                          <div id="bar1" class="h-full bg-rose-500 w-0 transition-all duration-100 ease-linear"></div>
                        </div>
                        <div id="msg1" class="text-xs text-slate-500 mt-1 h-4 italic"></div>
                      </div>

                      <!-- Group 2: Sjukskrivna -->
                      <div id="group2" class="p-3 rounded-xl border-2 border-transparent bg-slate-800 transition-all duration-300 opacity-50">
                        <div class="flex justify-between items-center">
                          <div class="flex items-center gap-3">
                            <div class="text-xl bg-slate-700 p-2 rounded-full">üìã</div>
                            <div>
                              <h4 class="font-bold text-white text-sm">2. Sjukskrivna</h4>
                              <p class="text-xs text-slate-500">H√∂g prioritet</p>
                            </div>
                          </div>
                          <div class="text-right">
                            <span class="block text-xs font-bold text-orange-400 uppercase tracking-wider">Exklusivitet</span>
                            <span class="text-sm font-mono font-bold text-slate-300">30 min</span>
                          </div>
                        </div>
                        <div class="mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                          <div id="bar2" class="h-full bg-orange-500 w-0 transition-all duration-100 ease-linear"></div>
                        </div>
                        <div id="msg2" class="text-xs text-slate-500 mt-1 h-4 italic"></div>
                      </div>

                      <!-- Group 3: Sm√§rta -->
                      <div id="group3" class="p-3 rounded-xl border-2 border-transparent bg-slate-800 transition-all duration-300 opacity-50">
                        <div class="flex justify-between items-center">
                          <div class="flex items-center gap-3">
                            <div class="text-xl bg-slate-700 p-2 rounded-full">üî•</div>
                            <div>
                              <h4 class="font-bold text-white text-sm">3. H√∂g Sm√§rta</h4>
                              <p class="text-xs text-slate-500">Prioriterad</p>
                            </div>
                          </div>
                          <div class="text-right">
                            <span class="block text-xs font-bold text-amber-400 uppercase tracking-wider">Exklusivitet</span>
                            <span class="text-sm font-mono font-bold text-slate-300">20 min</span>
                          </div>
                        </div>
                        <div class="mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                          <div id="bar3" class="h-full bg-amber-500 w-0 transition-all duration-100 ease-linear"></div>
                        </div>
                        <div id="msg3" class="text-xs text-slate-500 mt-1 h-4 italic"></div>
                      </div>

                      <!-- Group 4: Standard -->
                      <div id="group4" class="p-3 rounded-xl border-2 border-transparent bg-slate-800 transition-all duration-300 opacity-50">
                        <div class="flex justify-between items-center">
                          <div class="flex items-center gap-3">
                            <div class="text-xl bg-slate-700 p-2 rounded-full">‚è∞</div>
                            <div>
                              <h4 class="font-bold text-white text-sm">4. Standard / Reserv</h4>
                              <p class="text-xs text-slate-500">Normal prioritet</p>
                            </div>
                          </div>
                          <div class="text-right">
                            <span class="block text-xs font-bold text-blue-400 uppercase tracking-wider">Intervall</span>
                            <span class="text-sm font-mono font-bold text-slate-300">10 min</span>
                          </div>
                        </div>
                        <div class="mt-2 h-1.5 bg-slate-700 rounded-full overflow-hidden">
                          <div id="bar4" class="h-full bg-blue-500 w-0 transition-all duration-100 ease-linear"></div>
                        </div>
                        <div id="msg4" class="text-xs text-slate-500 mt-1 h-4 italic"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Dashboard & Statistics -->
            <div>
              <h3 class="font-bold text-lg mb-2 text-slate-200 flex items-center gap-2">
                <span class="text-xl">üìä</span> Dashboard & Statistik
              </h3>
              <p class="text-slate-400 text-sm mb-4">
                Realtidsdata f√∂r processoptimering och uppf√∂ljning.
              </p>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Chart 1: Fill Rate -->
                <div class="bg-slate-900 p-5 rounded-xl border border-slate-700">
                  <h4 class="font-bold text-slate-300 mb-3 text-sm uppercase tracking-wide">Fyllnadsgrad (Sista 30 dagarna)</h4>
                  <div class="h-48">
                    <canvas id="fillRateChart"></canvas>
                  </div>
                  <p class="text-xs text-center text-slate-500 mt-3">83% av kort-varsel luckor fylldes via systemet.</p>
                </div>

                <!-- Chart 2: Efficiency -->
                <div class="bg-slate-900 p-5 rounded-xl border border-slate-700">
                  <h4 class="font-bold text-slate-300 mb-3 text-sm uppercase tracking-wide">Effektivitet (SMS per fylld tid)</h4>
                  <div class="h-48">
                    <canvas id="efficiencyChart"></canvas>
                  </div>
                  <p class="text-xs text-center text-slate-500 mt-3">L√•gt antal = H√∂g precision i algoritmen.</p>
                </div>
              </div>
            </div>
            
            <!-- Tech Stack -->
            <div>
              <h3 class="font-bold text-lg mb-4 text-slate-200">Systemarkitektur</h3>
              <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <!-- Astro -->
                <div class="bg-slate-700 p-4 rounded-xl flex flex-col items-center text-center">
                  <div class="h-12 mb-3 flex items-center justify-center">
                    <svg viewBox="0 0 460 160" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto">
                      <path d="M65.7845 121.175C61.2669 117.045 59.9481 108.368 61.8302 102.082C65.0938 106.045 69.6158 107.301 74.2996 108.009C81.5305 109.103 88.6318 108.694 95.3489 105.389C96.1173 105.011 96.8275 104.507 97.6671 103.998C98.2974 105.826 98.4614 107.672 98.2413 109.551C97.706 114.127 95.4288 117.662 91.8069 120.341C90.3586 121.413 88.8261 122.371 87.3303 123.382C82.7349 126.487 81.4916 130.129 83.2184 135.427C83.2594 135.556 83.2961 135.685 83.3889 136C81.0427 134.95 79.3288 133.421 78.023 131.411C76.6437 129.289 75.9876 126.942 75.953 124.403C75.9358 123.167 75.9358 121.92 75.7696 120.702C75.3638 117.732 73.9694 116.402 71.3426 116.325C68.6466 116.247 66.5141 117.913 65.9486 120.538C65.9054 120.739 65.8428 120.938 65.7802 121.172L65.7845 121.175Z" fill="#FF5D01"/>
                      <path d="M40 101.034C40 101.034 53.3775 94.5177 66.7924 94.5177L76.9068 63.2155C77.2855 61.7017 78.3911 60.6729 79.6393 60.6729C80.8875 60.6729 81.9932 61.7017 82.3719 63.2155L92.4862 94.5177C108.374 94.5177 119.279 101.034 119.279 101.034C119.279 101.034 96.5558 39.133 96.5114 39.0088C95.8592 37.1787 94.7583 36 93.274 36H66.007C64.5227 36 63.4662 37.1787 62.7696 39.0088C62.7205 39.1307 40 101.034 40 101.034Z" fill="#fff"/>
                      <path d="M181.043 81.1227C181.043 86.6079 174.22 89.8838 164.773 89.8838C158.624 89.8838 156.45 88.3601 156.45 85.1604C156.45 81.8083 159.149 80.2085 165.297 80.2085C170.846 80.2085 175.569 80.2846 181.043 80.9703V81.1227ZM181.118 74.3423C177.744 73.5805 172.645 73.1234 166.572 73.1234C148.877 73.1234 140.555 77.3135 140.555 87.065C140.555 97.1975 146.253 101.083 159.449 101.083C170.621 101.083 178.193 98.2641 180.968 91.3313H181.417C181.342 93.0074 181.267 94.6834 181.267 95.9785C181.267 99.5592 181.867 99.8639 184.791 99.8639H198.587C197.837 97.7308 197.387 91.7122 197.387 86.5317C197.387 80.9703 197.612 76.7802 197.612 71.1426C197.612 59.6388 190.715 52.3251 169.121 52.3251C159.824 52.3251 149.477 53.925 141.605 56.2867C142.354 59.4102 143.404 65.7335 143.929 69.8474C150.752 66.6477 160.424 65.2764 167.922 65.2764C178.268 65.2764 181.118 67.6381 181.118 72.4377V74.3423Z" fill="#fff"/>
                      <path d="M218.971 84.3224C217.097 84.5509 214.547 84.5509 211.923 84.5509C209.149 84.5509 206.6 84.4748 204.875 84.2462C204.875 84.8557 204.8 85.5413 204.8 86.1508C204.8 95.6738 211.023 101.235 232.917 101.235C253.535 101.235 260.208 95.75 260.208 86.0746C260.208 76.9325 255.785 72.4377 236.216 71.4473C220.995 70.7616 219.646 69.0856 219.646 67.181C219.646 64.9717 221.595 63.8289 231.792 63.8289C242.364 63.8289 245.213 65.2764 245.213 68.3238V69.0094C246.712 68.9332 249.412 68.8571 252.186 68.8571C254.81 68.8571 257.659 68.9332 259.309 69.0856C259.309 68.3999 259.384 67.7905 259.384 67.2572C259.384 56.0581 250.086 52.4013 232.092 52.4013C211.848 52.4013 205.025 57.3533 205.025 67.0286C205.025 75.7136 210.499 81.1227 229.918 81.9607C244.238 82.4178 245.813 84.0177 245.813 86.227C245.813 88.5887 243.488 89.6553 233.442 89.6553C221.895 89.6553 218.971 88.0554 218.971 84.7795V84.3224Z" fill="#fff"/>
                      <path d="M284.955 44.1734C279.482 49.2778 269.66 54.3821 264.187 55.7534C264.262 58.5722 264.262 63.7527 264.262 66.5715L269.285 66.6477C269.21 72.0568 269.135 78.6086 269.135 82.9511C269.135 93.0835 274.458 100.702 291.028 100.702C298.001 100.702 302.65 99.9401 308.423 98.7212C307.823 94.9881 307.148 89.2743 306.923 84.9319C303.474 86.0746 299.126 86.6841 294.327 86.6841C287.654 86.6841 284.955 84.8557 284.955 79.599C284.955 75.028 284.955 70.7616 285.03 66.8001C293.578 66.8763 302.125 67.0286 307.148 67.181C307.073 63.2194 307.223 57.5056 307.448 53.6964C300.175 53.8488 292.003 53.925 285.255 53.925C285.33 50.5729 285.405 47.3732 285.48 44.1734H284.955Z" fill="#fff"/>
                      <path d="M329.736 64.286C329.811 60.3244 329.886 56.9724 329.961 53.6964H314.89C315.115 60.2483 315.115 66.9525 315.115 76.7802C315.115 86.6079 315.04 93.3883 314.89 99.8639H332.135C331.835 95.2929 331.76 87.5983 331.76 81.0465C331.76 70.6855 335.959 67.7143 345.481 67.7143C349.905 67.7143 353.054 68.2476 355.828 69.238C355.903 65.3526 356.653 57.8104 357.102 54.4583C354.253 53.6203 351.104 53.087 347.28 53.087C339.108 53.0108 333.11 56.3629 330.336 64.3622L329.736 64.286Z" fill="#fff"/>
                      <path d="M404.808 76.4754C404.808 84.7795 398.81 88.6649 389.363 88.6649C379.991 88.6649 373.993 85.008 373.993 76.4754C373.993 67.9428 380.066 64.7431 389.363 64.7431C398.735 64.7431 404.808 68.1714 404.808 76.4754ZM420.478 76.0945C420.478 59.5626 407.582 52.1728 389.363 52.1728C371.069 52.1728 358.622 59.5626 358.622 76.0945C358.622 92.5503 370.244 101.388 389.288 101.388C408.482 101.388 420.478 92.5503 420.478 76.0945Z" fill="#fff"/>
                    </svg>
                  </div>
                  <p class="text-xs text-slate-400">Frontend & API</p>
                  <p class="text-xs text-slate-500 mt-1">Ingen patientdata</p>
                </div>
                <!-- Supabase -->
                <div class="bg-slate-700 p-4 rounded-xl border-2 border-emerald-500 flex flex-col items-center text-center">
                  <div class="h-12 mb-3 flex items-center justify-center">
                    <svg viewBox="0 0 581 113" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-8 w-auto">
                      <path d="M151.397 66.7608C151.996 72.3621 157.091 81.9642 171.877 81.9642C184.764 81.9642 190.959 73.7624 190.959 65.7607C190.959 58.559 186.063 52.6577 176.373 50.6571L169.379 49.1569C166.682 48.6568 164.884 47.1565 164.884 44.7559C164.884 41.9552 167.681 39.8549 171.178 39.8549C176.772 39.8549 178.87 43.5556 179.27 46.4564L190.359 43.9558C189.76 38.6546 185.064 29.7527 171.078 29.7527C160.488 29.7527 152.696 37.0543 152.696 45.8561C152.696 52.7576 156.991 58.4591 166.482 60.5594L172.976 62.0598C176.772 62.8599 178.271 64.6605 178.271 66.8609C178.271 69.4615 176.173 71.762 171.777 71.762C165.983 71.762 163.085 68.1611 162.786 64.2602L151.397 66.7608Z" fill="#fff"/>
                      <path d="M233.421 80.4639H246.109C245.909 78.7635 245.609 75.3628 245.609 71.5618V31.2529H232.321V59.8592C232.321 65.5606 228.925 69.5614 223.031 69.5614C216.837 69.5614 214.039 65.1604 214.039 59.6592V31.2529H200.752V62.3599C200.752 73.0622 207.545 81.7642 219.434 81.7642C224.628 81.7642 230.325 79.7638 233.022 75.1627C233.022 77.1631 233.221 79.4636 233.421 80.4639Z" fill="#fff"/>
                      <path d="M273.076 99.4682V75.663C275.473 78.9636 280.469 81.6644 287.263 81.6644C301.149 81.6644 310.439 70.6617 310.439 55.7584C310.439 41.1553 302.148 30.1528 287.762 30.1528C280.37 30.1528 274.875 33.4534 272.677 37.2544V31.253H259.79V99.4682H273.076ZM297.352 55.8585C297.352 64.6606 291.958 69.7616 285.164 69.7616C278.372 69.7616 272.877 64.5605 272.877 55.8585C272.877 47.1566 278.372 42.0554 285.164 42.0554C291.958 42.0554 297.352 47.1566 297.352 55.8585Z" fill="#fff"/>
                      <path d="M317.964 67.0609C317.964 74.7627 324.357 81.8643 334.848 81.8643C342.139 81.8643 346.835 78.4634 349.332 74.5625C349.332 76.463 349.532 79.1635 349.832 80.4639H362.02C361.72 78.7635 361.422 75.2627 361.422 72.6622V48.4567C361.422 38.5545 355.627 29.7527 340.043 29.7527C326.855 29.7527 319.761 38.2544 318.963 45.9562L330.751 48.4567C331.151 44.1558 334.348 40.455 340.141 40.455C345.737 40.455 348.434 43.3556 348.434 46.8564C348.434 48.5568 347.536 49.9572 344.738 50.3572L332.65 52.1576C324.458 53.3579 317.964 58.2589 317.964 67.0609ZM337.644 71.962C333.349 71.962 331.25 69.1614 331.25 66.2608C331.25 62.4599 333.947 60.5594 337.345 60.0594L348.434 58.359V60.5594C348.434 69.2615 343.239 71.962 337.644 71.962Z" fill="#fff"/>
                      <path d="M387.703 80.4641V74.4627C390.299 78.6637 395.494 81.6644 402.288 81.6644C416.276 81.6644 425.467 70.5618 425.467 55.6585C425.467 41.0552 417.174 29.9528 402.788 29.9528C395.494 29.9528 390.1 33.1535 387.902 36.6541V8.04785H374.815V80.4641H387.703ZM412.178 55.7584C412.178 64.7605 406.784 69.7616 399.99 69.7616C393.297 69.7616 387.703 64.6606 387.703 55.7584C387.703 46.7564 393.297 41.8554 399.99 41.8554C406.784 41.8554 412.178 46.7564 412.178 55.7584Z" fill="#fff"/>
                      <path d="M432.99 67.0609C432.99 74.7627 439.383 81.8643 449.873 81.8643C457.165 81.8643 461.862 78.4634 464.358 74.5625C464.358 76.463 464.559 79.1635 464.858 80.4639H477.046C476.748 78.7635 476.448 75.2627 476.448 72.6622V48.4567C476.448 38.5545 470.653 29.7527 455.068 29.7527C441.881 29.7527 434.788 38.2544 433.989 45.9562L445.776 48.4567C446.177 44.1558 449.374 40.455 455.167 40.455C460.763 40.455 463.46 43.3556 463.46 46.8564C463.46 48.5568 462.561 49.9572 459.763 50.3572L447.676 52.1576C439.484 53.3579 432.99 58.2589 432.99 67.0609ZM452.671 71.962C448.375 71.962 446.276 69.1614 446.276 66.2608C446.276 62.4599 448.973 60.5594 452.371 60.0594L463.46 58.359V60.5594C463.46 69.2615 458.265 71.962 452.671 71.962Z" fill="#fff"/>
                      <path d="M485.645 66.7608C486.243 72.3621 491.339 81.9642 506.124 81.9642C519.012 81.9642 525.205 73.7624 525.205 65.7607C525.205 58.559 520.311 52.6577 510.62 50.6571L503.626 49.1569C500.929 48.6568 499.132 47.1565 499.132 44.7559C499.132 41.9552 501.928 39.8549 505.425 39.8549C511.021 39.8549 513.118 43.5556 513.519 46.4564L524.607 43.9558C524.007 38.6546 519.312 29.7527 505.326 29.7527C494.735 29.7527 486.944 37.0543 486.944 45.8561C486.944 52.7576 491.238 58.4591 500.73 60.5594L507.224 62.0598C511.021 62.8599 512.519 64.6605 512.519 66.8609C512.519 69.4615 510.421 71.762 506.025 71.762C500.23 71.762 497.334 68.1611 497.034 64.2602L485.645 66.7608Z" fill="#fff"/>
                      <path d="M545.385 50.2571C545.685 45.7562 549.482 40.5549 556.375 40.5549C563.967 40.5549 567.165 45.3561 567.365 50.2571H545.385ZM568.664 63.0601C567.065 67.4609 563.668 70.5617 557.474 70.5617C550.88 70.5617 545.385 65.8606 545.087 59.3593H580.252C580.252 59.159 580.451 57.1587 580.451 55.2582C580.451 39.4547 571.361 29.7527 556.175 29.7527C543.588 29.7527 531.998 39.9548 531.998 55.6584C531.998 72.262 543.886 81.9642 557.374 81.9642C569.462 81.9642 577.255 74.8626 579.753 66.3607L568.664 63.0601Z" fill="#fff"/>
                      <path d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z" fill="url(#supabase_grad1)"/>
                      <path d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z" fill="url(#supabase_grad2)" fill-opacity="0.2"/>
                      <path d="M45.317 2.07103C48.1765 -1.53037 53.9745 0.442937 54.0434 5.041L54.4849 72.2922H9.83113C1.64038 72.2922 -2.92775 62.8321 2.1655 56.4175L45.317 2.07103Z" fill="#3ECF8E"/>
                      <defs>
                        <linearGradient id="supabase_grad1" x1="53.9738" y1="54.974" x2="94.1635" y2="71.8295" gradientUnits="userSpaceOnUse">
                          <stop stop-color="#249361"/><stop offset="1" stop-color="#3ECF8E"/>
                        </linearGradient>
                        <linearGradient id="supabase_grad2" x1="36.1558" y1="30.578" x2="54.4844" y2="65.0806" gradientUnits="userSpaceOnUse">
                          <stop/><stop offset="1" stop-opacity="0"/>
                        </linearGradient>
                      </defs>
                    </svg>
                  </div>
                  <p class="text-xs text-slate-400">Databas & Auth</p>
                  <p class="text-xs text-emerald-400 mt-1">‚úì DPA kr√§vs</p>
                </div>
                <!-- 46elks -->
                <div class="bg-slate-700 p-4 rounded-xl border-2 border-emerald-500 flex flex-col items-center text-center">
                  <div class="h-12 mb-1 flex items-center justify-center gap-2">
                    <div class="bg-white rounded-lg p-1 h-10 w-10 flex items-center justify-center">
                      <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="h-full w-full">
                        <g transform="matrix(1.22481,0,0,1.22481,-5989.3,-5882.77)">
                          <path d="M4995.93,5499.04C4930.04,5425.15 4889.98,5327.73 4889.98,5221.02C4889.98,4990.31 5077.29,4803 5308,4803C5538.71,4803 5726.02,4990.31 5726.02,5221.02C5726.02,5451.74 5538.71,5639.05 5308,5639.05C5300.57,5639.05 5293.19,5638.85 5285.84,5638.47C5319.32,5538.25 5386.91,5378.24 5496.02,5403.8C5503.57,5425.9 5524.33,5441.81 5549.13,5441.81C5580.13,5441.81 5605.2,5416.74 5605.2,5385.73C5604.93,5367.4 5595.77,5350.96 5582.02,5340.72C5576.9,5336.67 5570.43,5333.17 5562.61,5330.2L5429.17,5278.98C5436.45,5279.52 5443.45,5279.79 5450.19,5279.79C5495.22,5279.79 5532.42,5268.74 5561.53,5246.36C5624.61,5198.11 5623,5116.15 5623,5112.92C5622.73,5102.41 5613.83,5093.78 5603.32,5094.32C5592.8,5094.59 5584.18,5103.48 5584.72,5114C5584.72,5114.54 5586.06,5179.51 5538.35,5215.9C5527.03,5224.53 5513.82,5231 5498.99,5235.31C5541.58,5194.6 5543.74,5134.22 5543.74,5131.25C5544.01,5120.74 5535.65,5111.84 5525.14,5111.57C5514.62,5111.3 5505.73,5119.66 5505.46,5130.17C5505.46,5130.71 5503.57,5185.98 5463.67,5214.82C5455.32,5220.75 5445.88,5225.34 5435.37,5228.3C5466.1,5195.68 5467.72,5150.66 5467.72,5148.5C5467.99,5137.99 5459.63,5129.09 5449.12,5128.82C5438.6,5128.56 5429.71,5136.91 5429.44,5147.43C5429.44,5147.97 5427.55,5188.67 5398.97,5209.43C5380.91,5222.64 5355.03,5224.8 5321.87,5218.33C5277.66,5209.7 5249.63,5193.26 5238.3,5168.99C5221.32,5132.87 5245.85,5087.58 5246.39,5086.77C5252.32,5076.26 5248.55,5062.78 5238.03,5056.85C5227.52,5050.92 5214.04,5054.42 5208.11,5065.2C5206.76,5067.63 5179.27,5116.96 5191.4,5167.91C5183.31,5160.1 5177.11,5151.74 5172.8,5142.3C5149.34,5092.16 5183.04,5030.97 5183.58,5029.89C5189.51,5019.38 5185.74,5005.9 5175.22,4999.97C5164.71,4994.03 5151.23,4997.54 5145.3,5008.32C5143.68,5011.29 5105.67,5079.49 5126.97,5146.08C5113.22,5133.95 5103.24,5120.47 5096.77,5105.37C5071.16,5046.6 5110.79,4982.98 5111.06,4982.17C5117.53,4971.93 5114.57,4958.45 5104.32,4951.71C5094.08,4945.24 5080.6,4948.2 5073.86,4958.45C5071.7,4961.95 5021.29,5042.02 5056.07,5122.36C5082.22,5182.74 5147.99,5224.53 5251.51,5246.9C5259.87,5249.06 5292.22,5256.61 5295.73,5257.41L5294.65,5257.41L5162.28,5266.85C5162.28,5266.85 5175.76,5342.6 5276.32,5297.31L4995.93,5499.04ZM5369.05,5342.06C5357.73,5342.06 5348.29,5332.9 5348.29,5321.31C5348.29,5309.98 5357.46,5300.55 5369.05,5300.55C5380.37,5300.55 5389.81,5309.71 5389.81,5321.31C5389.81,5332.63 5380.37,5342.06 5369.05,5342.06Z" fill="#15115F"/>
                        </g>
                      </svg>
                    </div>
                    <span class="text-white font-bold text-lg">46elks</span>
                  </div>
                  <p class="text-xs text-slate-400">SMS Gateway</p>
                  <p class="text-xs text-emerald-400 mt-1">‚úì DPA kr√§vs</p>
                </div>
                <!-- Netlify -->
                <div class="bg-slate-700 p-4 rounded-xl border-2 border-emerald-500 flex flex-col items-center text-center">
                  <div class="h-12 mb-3 flex items-center justify-center">
                    <svg viewBox="0 0 512 209" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-auto">
                      <path d="M117.436 207.036V154.604L118.529 153.51H129.452L130.545 154.604V207.036L129.452 208.13H118.529L117.436 207.036Z" fill="#05BDBA"/>
                      <path d="M117.436 53.5225V1.09339L118.529 0H129.452L130.545 1.09339V53.5225L129.452 54.6159H118.529L117.436 53.5225Z" fill="#05BDBA"/>
                      <path d="M69.9539 169.238H68.4094L60.6869 161.512V159.967L78.7201 141.938L86.8976 141.942L87.9948 143.031V151.209L69.9539 169.238Z" fill="#05BDBA"/>
                      <path d="M69.9462 38.8917H68.4017L60.6792 46.6181V48.1626L78.7124 66.192L86.8899 66.1882L87.9871 65.0986V56.9212L69.9462 38.8917Z" fill="#05BDBA"/>
                      <path d="M1.09339 97.5104H75.3711L76.4645 98.6038V109.526L75.3711 110.62H1.09339L0 109.526V98.6038L1.09339 97.5104Z" fill="#05BDBA"/>
                      <path d="M440.999 97.5104H510.91L512.004 98.6038V109.526L510.91 110.62H436.633L435.539 109.526L439.905 98.6038L440.999 97.5104Z" fill="#05BDBA"/>
                      <path d="M212.056 108.727L210.963 109.821H177.079L175.986 110.914C175.986 113.101 178.173 119.657 186.916 119.657C190.196 119.657 193.472 118.564 194.566 116.377L195.659 115.284H208.776L209.869 116.377C208.776 122.934 203.313 132.774 186.916 132.774C168.336 132.774 159.589 119.657 159.589 104.357C159.589 89.0576 168.332 75.9408 185.822 75.9408C203.313 75.9408 212.056 89.0576 212.056 104.357V108.731V108.727ZM195.659 97.7971C195.659 96.7037 194.566 89.0538 185.822 89.0538C177.079 89.0538 175.986 96.7037 175.986 97.7971L177.079 98.8905H194.566L195.659 97.7971Z" fill="#fff"/>
                      <path d="M242.66 115.284C242.66 117.47 243.753 118.564 245.94 118.564H255.776L256.87 119.657V130.587L255.776 131.681H245.94C236.103 131.681 227.36 127.307 227.36 115.284V91.2368L226.266 90.1434H218.617L217.523 89.05V78.1199L218.617 77.0265H226.266L227.36 75.9332V66.0965L228.453 65.0031H241.57L242.663 66.0965V75.9332L243.757 77.0265H255.78L256.874 78.1199V89.05L255.78 90.1434H243.757L242.663 91.2368V115.284H242.66Z" fill="#fff"/>
                      <path d="M283.1 131.681H269.983L268.889 130.587V56.2636L269.983 55.1702H283.1L284.193 56.2636V130.587L283.1 131.681Z" fill="#fff"/>
                      <path d="M312.61 68.2871H299.493L298.399 67.1937V56.2636L299.493 55.1702H312.61L313.703 56.2636V67.1937L312.61 68.2871ZM312.61 131.681H299.493L298.399 130.587V78.1237L299.493 77.0304H312.61L313.703 78.1237V130.587L312.61 131.681Z" fill="#fff"/>
                      <path d="M363.98 56.2636V67.1937L362.886 68.2871H353.05C350.863 68.2871 349.769 69.3805 349.769 71.5672V75.9408L350.863 77.0342H361.793L362.886 78.1276V89.0576L361.793 90.151H350.863L349.769 91.2444V130.591L348.676 131.684H335.559L334.466 130.591V91.2444L333.372 90.151H325.723L324.629 89.0576V78.1276L325.723 77.0342H333.372L334.466 75.9408V71.5672C334.466 59.5438 343.209 55.1702 353.046 55.1702H362.882L363.976 56.2636H363.98Z" fill="#fff"/>
                      <path d="M404.42 132.774C400.046 143.704 395.677 150.261 380.373 150.261H374.906L373.813 149.167V138.237L374.906 137.144H380.373C385.836 137.144 386.929 136.05 388.023 132.77V131.677L370.536 89.05V78.1199L371.63 77.0265H381.466L382.56 78.1199L395.677 115.284H396.77L409.887 78.1199L410.98 77.0265H420.817L421.91 78.1199V89.05L404.424 132.77L404.42 132.774Z" fill="#fff"/>
                      <path d="M135.454 131.681L134.361 130.587L134.368 98.9172C134.368 93.4541 132.22 89.2182 125.625 89.0806C122.234 88.9926 118.354 89.0729 114.209 89.2488L113.59 89.8834L113.598 130.587L112.504 131.681H99.3913L98.2979 130.587V77.5388L99.3913 76.4454L128.901 76.1778C143.685 76.1778 149.668 86.3356 149.668 97.8009V130.587L148.575 131.681H135.454Z" fill="#fff"/>
                    </svg>
                  </div>
                  <p class="text-xs text-slate-400">Hosting & Cron</p>
                  <p class="text-xs text-emerald-400 mt-1">‚úì DPA kr√§vs</p>
                </div>
                <!-- GitHub -->
                <div class="bg-slate-700 p-4 rounded-xl flex flex-col items-center text-center">
                  <div class="h-12 mb-3 flex items-center justify-center">
                    <svg viewBox="0 0 98 96" xmlns="http://www.w3.org/2000/svg" class="h-10 w-auto">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="#fff"/>
                    </svg>
                  </div>
                  <p class="text-xs text-slate-400">Versionshantering</p>
                  <p class="text-xs text-slate-500 mt-1">Privat repo</p>
                </div>
              </div>
            </div>

            <!-- GDPR & Legal Compliance -->
            <div>
              <h3 class="font-bold text-lg mb-4 text-slate-200">üõ°Ô∏è GDPR, PDL & Avtal</h3>
              
              <!-- Compliance checklist -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="bg-slate-700 rounded-xl p-4">
                  <h4 class="font-bold text-emerald-400 mb-3">Regelefterlevnad</h4>
                  <ul class="space-y-2 text-sm">
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span>GDPR (Art. 6 & 9)</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span>Patientdatalagen (PDL)</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span>Offentlighets- & sekretesslagen</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span>AES-256 kryptering</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span>Automatisk dataradering</span>
                    </li>
                  </ul>
                </div>

                <div class="bg-slate-700 rounded-xl p-4">
                  <h4 class="font-bold text-amber-400 mb-3">Personuppgiftsbitr√§desavtal (DPA)</h4>
                  <ul class="space-y-2 text-sm">
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span><strong>Supabase</strong> ‚Äì Databas (EU/Frankfurt)</span>
                      <span class="text-xs text-emerald-400 ml-auto">Signerat 2026-01</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-amber-400">‚è≥</span>
                      <span><strong>46elks</strong> ‚Äì SMS (Sverige)</span>
                      <span class="text-xs text-slate-500 ml-auto">ePrivacy (LEK) g√§ller</span>
                    </li>
                    <li class="flex items-center gap-2">
                      <span class="text-emerald-400">‚úì</span>
                      <span><strong>Netlify</strong> ‚Äì Hosting (EU)</span>
                      <span class="text-xs text-emerald-400 ml-auto">Inkluderat i villkor</span>
                    </li>
                  </ul>
                  <p class="text-xs text-slate-400 mt-3">
                    ‚úì = Klart | ‚è≥ = P√•g√•r | ‚òê = Ska inh√§mtas
                  </p>
                </div>
              </div>

              <!-- Samtycke & r√§ttslig grund -->
              <div class="bg-slate-700 rounded-xl p-4">
                <h4 class="font-bold text-slate-200 mb-3">R√§ttslig grund f√∂r SMS-utskick</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                  <div class="bg-slate-600 p-3 rounded-lg">
                    <p class="font-bold text-emerald-400 mb-1">Med samtycke (Art. 9.2.a)</p>
                    <p class="text-slate-300">Patient har kryssat i h√§lsodeklarationen ‚Üí Personligt SMS med operationsdetaljer</p>
                  </div>
                  <div class="bg-slate-600 p-3 rounded-lg">
                    <p class="font-bold text-amber-400 mb-1">Utan samtycke (Ber√§ttigat intresse)</p>
                    <p class="text-slate-300">Generiskt SMS utan k√§nslig info ‚Üí "Vi har en ledig tid..."</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Priority intervals -->
            <div>
              <h3 class="font-bold text-lg mb-4 text-slate-200">Prioritetsalgoritm (detaljerad)</h3>
              
              <!-- Smart intervall baserat p√• dagar -->
              <div class="bg-slate-700 rounded-xl p-4 mb-4">
                <h4 class="font-bold text-slate-300 mb-3 text-sm">1. Smart intervall (baserat p√• tid kvar)</h4>
                <p class="text-slate-400 text-xs mb-3">
                  Systemet v√§ljer automatiskt intervall baserat p√• hur m√•nga dagar det √§r kvar till operationen.
                </p>
                <table class="w-full text-sm">
                  <thead>
                    <tr class="text-slate-400 text-left">
                      <th class="pb-2">Dagar kvar</th>
                      <th class="pb-2">Intervall</th>
                      <th class="pb-2">L√§ge</th>
                    </tr>
                  </thead>
                  <tbody class="text-slate-200">
                    <tr><td>Samma dag</td><td>5 min</td><td>üî¥ Desperat</td></tr>
                    <tr><td>1 dag (dagen innan)</td><td>5-10 min</td><td>üü† Stressigt</td></tr>
                    <tr><td>2 dagar</td><td>10 min</td><td>üü° Normalt</td></tr>
                    <tr><td>3+ dagar</td><td>20 min</td><td>üü¢ Lugnt</td></tr>
                  </tbody>
                </table>
                <p class="text-slate-500 text-xs mt-3">
                  üí° <strong>Dagen innan:</strong> Intervallet justeras √§ven baserat p√• klockan. 
                  Efter 14:00 minskas intervallet f√∂r att hinna klart f√∂re 16:00.
                </p>
              </div>

              <!-- Huvudprioritet -->
              <div class="bg-slate-700 rounded-xl p-4 mb-4">
                <h4 class="font-bold text-slate-300 mb-3 text-sm">2. Medicinsk prioritet (sorteringsordning)</h4>
                <p class="text-slate-400 text-xs mb-3">
                  Oavsett intervall skickas SMS alltid i denna prioritetsordning:
                </p>
                <table class="w-full text-sm">
                  <thead>
                    <tr class="text-slate-400 text-left">
                      <th class="pb-2">Prioritet</th>
                      <th class="pb-2">Beskrivning</th>
                    </tr>
                  </thead>
                  <tbody class="text-slate-200">
                    <tr><td>üö® AKUT</td><td>M√•ste opereras snarast</td></tr>
                    <tr><td>üìã Sjukskriven</td><td>Ont + funktionsbortfall, kan ej arbeta</td></tr>
                    <tr><td>üî• Mycket ont</td><td>H√∂g sm√§rtniv√• men kan arbeta</td></tr>
                    <tr><td>üë¥ Pension√§r (67+)</td><td>Flexibla tider, l√§ttare att komma</td></tr>
                    <tr><td>‚è∞ Normal</td><td>Standard v√§ntelista</td></tr>
                  </tbody>
                </table>
              </div>

              <!-- Sekund√§r sortering: Sida -->
              <div class="bg-slate-700 rounded-xl p-4 mb-4">
                <h4 class="font-bold text-slate-300 mb-3 text-sm">3. Sida H√ñ/V√Ñ (sekund√§r sortering)</h4>
                <p class="text-slate-400 text-xs mb-3">
                  Inom varje prioritetsniv√• sorteras patienter efter om deras sida matchar kampanjens √∂nskade sida.
                </p>
                <p class="text-slate-500 text-xs">
                  üí° <strong>Varf√∂r sida?</strong> Att operera alla h√∂ger-axlar f√∂rst och sedan alla v√§nster-axlar 
                  minskar utrustningsbyten och sparar tid under operationsdagen.
                </p>
              </div>

              <!-- Terti√§r sortering: V√§ntetid -->
              <div class="bg-slate-700 rounded-xl p-4 mb-4">
                <h4 class="font-bold text-slate-300 mb-3 text-sm">4. V√§ntetid (terti√§r sortering)</h4>
                <p class="text-slate-400 text-xs mb-3">
                  Inom samma prioritet och sida, sorteras patienter efter hur l√•ngt bort deras planerade operation √§r.
                  <strong class="text-slate-200">L√§ngst v√§ntetid f√∂rst.</strong>
                </p>
                <div class="bg-slate-800 rounded-lg p-3 font-mono text-xs text-slate-300">
                  <div class="text-emerald-400 mb-2">// Exempel: Tv√• normala patienter, b√•da H√ñ sida</div>
                  <div>Patient A: Op planerad om 3 m√•nader ‚Üê Skickas f√∂rst</div>
                  <div>Patient B: Op planerad om 2 veckor</div>
                </div>
                <p class="text-slate-500 text-xs mt-3">
                  üí° <strong>Varf√∂r?</strong> Patienter med l√•ng v√§ntetid √§r mest motiverade att ta en kortvarsel-tid. 
                  De som redan har operation n√§sta vecka vill s√§llan √§ndra. Genom att prioritera de med l√§ngst k√∂ 
                  minskar den totala v√§ntetiden f√∂r alla.
                </p>
              </div>

              <!-- Operationsstorlek -->
              <div class="bg-slate-700 rounded-xl p-4">
                <h4 class="font-bold text-slate-300 mb-3 text-sm">5. Operationsstorlek (filtrering)</h4>
                <p class="text-slate-400 text-xs mb-3">
                  Vid kampanjskapande filtreras patienter baserat p√• om operationsstorleken matchar den lediga tiden.
                </p>
                <div class="grid grid-cols-2 gap-3">
                  <div class="bg-slate-800 rounded-lg p-3">
                    <div class="flex items-center gap-2 mb-2">
                      <span class="text-sky-400">üîπ</span>
                      <span class="font-bold text-slate-200">Liten operation</span>
                    </div>
                    <p class="text-xs text-slate-400">5-15 minuter. T.ex. injektioner, sm√• exkisioner.</p>
                  </div>
                  <div class="bg-slate-800 rounded-lg p-3">
                    <div class="flex items-center gap-2 mb-2">
                      <span class="text-indigo-400">üî∑</span>
                      <span class="font-bold text-slate-200">Stor operation</span>
                    </div>
                    <p class="text-xs text-slate-400">15-60 minuter. T.ex. artroskopi, ligamentplastik.</p>
                  </div>
                </div>
                <p class="text-slate-500 text-xs mt-3">
                  üí° Patienter kan markeras f√∂r "b√•da" om de kan fylla antingen en liten eller stor lucka.
                </p>
              </div>
            </div>

            <!-- Data handling -->
            <div>
              <h3 class="font-bold text-lg mb-4 text-slate-200">Datahantering</h3>
              <div class="bg-slate-700 rounded-xl p-4">
                <table class="w-full text-sm">
                  <thead>
                    <tr class="text-slate-400 text-left">
                      <th class="pb-2">Data</th>
                      <th class="pb-2">Lagring</th>
                      <th class="pb-2">Radering</th>
                    </tr>
                  </thead>
                  <tbody class="text-slate-200">
                    <tr>
                      <td>Telefonnummer</td>
                      <td>AES-256 krypterat</td>
                      <td>Efter op-datum eller 7 dagar</td>
                    </tr>
                    <tr>
                      <td>Patientnamn</td>
                      <td>Klartext (f√∂r s√∂kning)</td>
                      <td>Efter op-datum eller 7 dagar</td>
                    </tr>
                    <tr>
                      <td>Kampanjhistorik</td>
                      <td>Anonymiserad</td>
                      <td>Bevaras (f√∂r statistik)</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="flex flex-wrap gap-4">
              <a href="/personal/kort-varsel" class="bg-rose-600 hover:bg-rose-700 text-white px-4 py-2 rounded-lg font-medium transition">
                ‚Üí √ñppna dashboard
              </a>
              <a href="/om-oss/kort-varsel-dokumentation" class="bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg font-medium transition">
                üìÑ Full dokumentation
              </a>
            </div>
          </div>
        </details>
      </section>

    </div>
  </main>

  <!-- Chart.js for future stats display -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Interactive JavaScript -->
  <script>
    // Phone mockup state
    let currentStep = 1;

    // Step button click handlers
    document.querySelectorAll('.step-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        currentStep = parseInt(btn.dataset.step);
        renderPhoneContent();
        
        // Highlight active step
        document.querySelectorAll('.step-btn').forEach(b => {
          b.classList.remove('border-rose-500', 'bg-rose-50');
          b.classList.add('border-stone-200');
        });
        btn.classList.remove('border-stone-200');
        btn.classList.add('border-rose-500', 'bg-rose-50');
      });
    });

    function renderPhoneContent() {
      const container = document.getElementById('phoneContent');
      if (!container) return;

      if (currentStep === 1) {
        container.innerHTML = `
          <div class="flex flex-col gap-4 fade-in">
            <div class="text-xs text-center text-slate-400 mb-2">Idag 14:30</div>
            <div class="bg-stone-200 p-3 rounded-2xl rounded-bl-none max-w-[85%] self-start text-sm text-slate-800 shadow-sm">
              <p class="font-bold mb-1">S√∂dermalms Ortopedi</p>
              <p>Hej Anna! Vi har en ledig operationsplats f√∂r axeloperation imorgon 14:30.</p>
              <br>
              <p>Kan du komma med kort varsel?</p>
              <p class="text-blue-600 underline mt-1">specialist.se/s/x7k9m2</p>
            </div>
            <div class="text-xs text-center text-slate-400 mt-4">
              ‚òùÔ∏è Klicka p√• l√§nken f√∂r att svara
            </div>
          </div>
        `;
      } else if (currentStep === 2) {
        container.innerHTML = `
          <div class="fade-in bg-white h-full flex flex-col">
            <div class="border-b pb-2 mb-4 flex justify-between items-center">
              <span class="font-bold text-rose-600">S√∂dermalms Ortopedi</span>
              <span class="text-xs bg-emerald-100 text-emerald-800 px-2 py-0.5 rounded-full">S√§ker l√§nk</span>
            </div>
            
            <h3 class="font-bold text-lg mb-2">Ledig tid: Imorgon 14:30</h3>
            
            <div class="bg-orange-50 border border-orange-200 p-3 rounded-lg mb-4 text-xs text-orange-800">
              <strong>‚ö†Ô∏è Viktigt</strong><br>
              Operationen √§r inom 24h. Har du fr√•gor om mediciner? Ring oss!
            </div>

            <div class="space-y-3 mb-6">
              <label class="flex gap-2 items-start cursor-pointer">
                <input type="checkbox" class="mt-1" id="healthCheck">
                <span class="text-sm text-slate-700">Jag har inga √∂ppna s√•r eller p√•g√•ende infektioner.</span>
              </label>
            </div>

            <div class="mt-auto space-y-2">
              <button onclick="goToStep(3)" class="w-full bg-emerald-600 text-white font-bold py-3 rounded-lg shadow-md hover:bg-emerald-700">JA, jag kan komma</button>
              <button class="w-full bg-stone-100 text-slate-600 font-medium py-3 rounded-lg">Nej, jag kan inte</button>
            </div>
            <div class="mt-4 text-center">
              <span class="text-xs text-stone-400 underline">Avregistrera mig</span>
            </div>
          </div>
        `;
      } else if (currentStep === 3) {
        container.innerHTML = `
          <div class="fade-in h-full flex flex-col items-center justify-center text-center">
            <div class="w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center text-3xl mb-4">üéâ</div>
            <h3 class="font-bold text-xl text-slate-900 mb-2">Tack Anna!</h3>
            <p class="text-sm text-slate-600 mb-6">Du har svarat JA. Vi ringer dig inom kort f√∂r att bekr√§fta.</p>
            
            <div class="bg-stone-50 p-4 rounded-lg w-full text-left border border-stone-200">
              <p class="text-xs text-stone-500 uppercase font-bold mb-1">Status</p>
              <p class="text-sm font-medium text-slate-800">‚úÖ Prelimin√§rbokad</p>
              <p class="text-xs text-slate-500 mt-2">Din ordinarie tid finns kvar som backup.</p>
            </div>
          </div>
        `;
      }
    }

    // Make goToStep available globally for onclick
    window.goToStep = function(step) {
      currentStep = step;
      renderPhoneContent();
    };

    // Initialize
    renderPhoneContent();

    // --- Priority Cascade Simulation ---
    const simState = {
      running: false,
      time: 0,
      intervalId: null
    };

    const cascadeRules = [
      { id: 'group1', start: 0, duration: 60, msg: 'Skickar till Akut...' },
      { id: 'group2', start: 60, duration: 30, msg: 'Skickar till Sjukskrivna...' },
      { id: 'group3', start: 90, duration: 20, msg: 'Skickar till Sm√§rtpatienter...' },
      { id: 'group4', start: 110, duration: 1000, msg: 'Skickar till Standardk√∂ (10min intervall)...' }
    ];

    const startSimBtn = document.getElementById('startSimBtn');
    const resetSimBtn = document.getElementById('resetSimBtn');
    const simTimer = document.getElementById('simTimer');
    const simStatus = document.getElementById('simStatus');

    if (startSimBtn) {
      startSimBtn.addEventListener('click', startSimulation);
      resetSimBtn.addEventListener('click', resetSimulation);
    }

    function startSimulation() {
      if (simState.running) return;
      simState.running = true;
      simState.time = 0;
      
      startSimBtn.disabled = true;
      startSimBtn.classList.add('opacity-50');
      resetSimBtn.disabled = false;
      simStatus.innerText = "Kampanj Aktiv: S√∂ker patienter...";
      simStatus.className = "font-mono text-rose-400 font-bold bg-slate-900 p-2.5 rounded border border-rose-500 text-sm animate-pulse";

      simState.intervalId = setInterval(() => {
        simState.time += 2;
        updateSimUI(simState.time);
      }, 100);
    }

    function resetSimulation() {
      clearInterval(simState.intervalId);
      simState.running = false;
      simState.time = 0;
      updateSimUI(0, true);
      
      startSimBtn.disabled = false;
      startSimBtn.classList.remove('opacity-50');
      resetSimBtn.disabled = true;
      simStatus.innerText = "V√§ntar p√• start...";
      simStatus.className = "font-mono text-emerald-400 font-bold bg-slate-900 p-2.5 rounded border border-slate-700 text-sm";
    }

    function updateSimUI(currentTime, isReset = false) {
      if (simTimer) simTimer.innerText = currentTime + " min";

      cascadeRules.forEach(rule => {
        const elGroup = document.getElementById(rule.id);
        const elBar = document.getElementById(rule.id.replace('group', 'bar'));
        const elMsg = document.getElementById(rule.id.replace('group', 'msg'));

        if (!elGroup || !elBar || !elMsg) return;

        if (isReset) {
          elGroup.classList.remove('border-rose-500', 'border-blue-500', 'bg-slate-700', 'shadow-md', 'opacity-100');
          elGroup.classList.add('border-transparent', 'bg-slate-800', 'opacity-50');
          elBar.style.width = '0%';
          elMsg.innerText = '';
          return;
        }

        if (currentTime >= rule.start) {
          elGroup.classList.remove('opacity-50', 'bg-slate-800', 'border-transparent');
          elGroup.classList.add('opacity-100', 'bg-slate-700');

          let progress = 0;
          if (rule.id === 'group4') {
            progress = ((currentTime - rule.start) % 10) * 10;
            if (currentTime > rule.start) elMsg.innerText = rule.msg + ` (Batch ${Math.floor((currentTime - rule.start) / 10) + 1})`;
            elGroup.classList.add('border-blue-500', 'shadow-md');
          } else {
            const timeInGroup = currentTime - rule.start;
            progress = Math.min((timeInGroup / rule.duration) * 100, 100);
            
            if (progress < 100) {
              elGroup.classList.add('border-rose-500', 'shadow-md');
              elMsg.innerText = rule.msg;
            } else {
              elGroup.classList.remove('border-rose-500', 'shadow-md');
              elGroup.classList.add('border-slate-600');
              elMsg.innerText = "F√∂nster st√§ngt. Inget svar.";
            }
          }
          elBar.style.width = progress + '%';
        }
      });
    }

    // --- Chart.js Initialization ---
    window.addEventListener('load', () => {
      const ctxFill = document.getElementById('fillRateChart');
      const ctxEff = document.getElementById('efficiencyChart');

      if (ctxFill) {
        new Chart(ctxFill.getContext('2d'), {
          type: 'doughnut',
          data: {
            labels: ['Fyllda via SMS', 'Manuellt Fyllda', 'Missade'],
            datasets: [{
              data: [83, 12, 5],
              backgroundColor: ['#10b981', '#f59e0b', '#ef4444'],
              borderWidth: 0
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { 
                position: 'bottom',
                labels: { color: '#94a3b8', font: { size: 11 } }
              }
            }
          }
        });
      }

      if (ctxEff) {
        new Chart(ctxEff.getContext('2d'), {
          type: 'bar',
          data: {
            labels: ['Kampanj A', 'Kampanj B', 'Kampanj C', 'Kampanj D', 'Snitt'],
            datasets: [{
              label: 'Antal SMS',
              data: [5, 12, 8, 15, 8.7],
              backgroundColor: '#6366f1',
              borderRadius: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: { 
                beginAtZero: true, 
                ticks: { color: '#94a3b8' },
                grid: { color: '#334155' }
              },
              x: {
                ticks: { color: '#94a3b8' },
                grid: { display: false }
              }
            },
            plugins: {
              legend: { display: false }
            }
          }
        });
      }
    });
  </script>

</BaseLayout>
